---
layout: post
title: "【从零开始部署octopress系列之一】octopress安装与部署"
date: 2015-06-30 16:43:07 +0800
comments: true
categories: blog
tags:
- octopress
- git
- ruby
- from 0 to 1
---

* list element with functor item
{:toc}





### 一、写这个系列的起因
接触octopress是源于一直以来我就想有个自己的博客，但是一直不想四处找稳定的空间（X宝的坑太多，国外的太贵）所以也就作罢，直到后来偶然在知乎上搜到一篇文章里面讲到如何利用github建立自己的博客，我多年想建个人博客的愿望又被激了起来，于是乎就开始了漫长的折腾。

起先本来是用hexo不过我不喜欢那样的feel，当然萝卜青菜各有所爱，hexo有它自身的优势只不过我不喜欢罢了，后来翻来覆去的查找各种博客模板最终google到了octopress，刚开始部署按照教程去走也还算顺利，在本地看到了自带模板的模样，直觉告诉我 I like it!
于是乎就喜滋滋的开始了octopress折腾之路，一路上披荆斩棘解决各种坑，几乎把google和百度都查了个遍，以至于凡是带octopress关键字的我都进去瞅过，终于有了现在这个博客，虽然还是很简陋，但是以我从来没有接触ruby（弄这个博客之前ruby是什么我都不知道。。。）、git（知道，但是从来没用过。。。）、html、css、JavaScript的情况来看，这已经是我能做的最好看的样子了，嘿嘿嘿！
<!--more-->

介于我折腾的如此痛苦（部署期间我翻阅了各种跟octopress相关的博客，但是要么写的不全面，要么是在MAC下或者linux下的部署步骤不适合windows，要么插件按照他写的步骤完全没法用---年代久远等因素），所以我想把我折腾的整个过程总结出来，写一个全面的系列，这样一来方便我自己后续查阅，二来给后面用octopress的人一个参考，你按照我的步骤去做就能做出我现在博客的样子，省去了很多折腾的时间（虽然折腾的过程也很有乐趣，嘿嘿）以上就是我为什么要写这个系列的原因。

### 二、部署之前需要做的事情

> * `step 1：github_page建立`
>     * `首先你得有个github账号（github.com 不要问我怎么注册的。。。。如果这都要人教，我觉得你可以告别使用octopress了）`
>     * `然后你要创建一个名为yourname.github.io的库，这里的yourname一定要确保跟你用户名一模一样。`
>     * `最后到https://msysgit.github.io/下载一个git进行安装（同样不要问我怎么安装。。。。）`

> * `step 2：安装Ruby`
>     * `到http://rubyinstaller.org/downloads/下载rubyinstallers以及其对应版本的DevKit`
>     * `先安装rubyinstall并设置好环境变量（正常情况下，你安装完毕他会自动部署好环境变量，但是有的时候不生效，你可以在PATH结尾处再弄一个，记住一定要;号结尾），然后把DevKit解压到C盘下，并设置环境变量`
>     * `如果你随便打开一个文件夹，空白处右键打开git bash输入ruby然后按下tab键能自动出来ruby.exe的选项，证明你环境变量设置成功了。`
>     * `在git bash里进入DevKit的目录进行DevKit的安装`
>         * `cd /c/devkit`
>         * `ruby.exe dk.rb init`
>         * `ruby.exe dk.rb install`

> * `step 3：购买域名并绑定（可选）`
>     * `我的域名是在goddady买的，安全，而且可以使用支付宝（不过前提是不能使用超低折扣的折扣码，目前中国人能使用的折扣码只有8.99美元/年的）。别问我折扣码怎么得，自行百度。`
>         * `补充一些注意事项：`
>              * `注册时用户填写信息时一定要输入正确的邮箱名字，否则修改十分麻烦。`
>              * `买完域名之后一定要记得去自己的邮箱查看激活邮件，否则域名激活不了。`
>     * `买了域名以后记得到my account下去查看域名是否已经在你账户下`
>     * `DNS服务设置可以参考这个帖子http://www.admin5.com/article/20131014/527502.shtml`
>     * `DNS智能解析绑定`
>         * `到DNSPOD（https://www.dnspod.cn/）上点击产品中心里的域名解析`
>         * `点击添加域名然后填入你在goddady购买的域名`
>         * `需要注意的点：`
>             * `CNAME的记录值后面有个.号，这个一定要有，要注意！`
>             * `A的记录值要照着写，这个是github的地址。`
>             * `另外默认存在的NS的记录值要原封不动的填到goddady的DNS绑定服务器选项里，前面的帖子里有写照着填就好了。`
>         * `具体设置可以参考下图：`

{% img /DNS解析设置.png %}




### 三、octopress安装与部署
> * `下载标准的octopress模板：`
>     * `git clone git://github.com/imathis/octopress.git octopress`
>     * `gem install bundler`
> * `移除国外ruby源添加淘宝ruby源：`
>     * `gem sources --remove https://rubygems.org/`
>     * `gem sources -a http://ruby.taobao.org/`
>     * `gem sources -l`
>     * `一定要确保只有一个源`
> * `安装各种关联包`
>     * `bundle install`
>         * `这里一步可能会持续很长时间，因为会报各种关联包缺失，你按照他的提示安装关联包即可，一直装到bundle install提示安装完成为止`
> * `安装octopress默认主题`
>     * `rake install`
> * `设置github_page库地址`
>     * `rake setup_github_pages`
>         * `这里填写的url是你自己的page库，格式如下：`
>             * `git@github.com:yourname/yourname.github.io.git`
> * `设置CNAME`
>     * `echo '你的域名' >> source/CNAME      //如果你有自己的域名可以这样操作绑定到github的二级域名上。`
> * `生成静态页面`
>     * `rake generate`
> * `本地测试`
>     * `rake preview`
>     * `打开本地浏览器访问http://localhost:4000，如果能出来octopress默认页面就证明octopress本地库部署OK并且静态页面生成没有问题。`
> * `push静态页面到你的github_page库上`
>     * `rake deploy`
> * `备份本地octopress库到github_page库的source分支上`
>     * `git add .`
>     * `git commit -am "YY-MM-DD-hh:mm"`
>     * `git push origin source`
> * `注意：以上的操作都要在octopress目录下做`
> * `访问你的域名看看是否能正常访问（域名绑定和解析需要等一段时间）`

至此，整个octopress的安装与部署就完成了。但是默认的界面比较土，而且功能单一，所以后面将会逐步逐步的去给它添加插件以及修改框架，把它变成属于你的独一无二的博客。